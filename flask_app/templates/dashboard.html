<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ user.first_name }}'s Tasks</title>
        <link rel="stylesheet" href="{{url_for('static',filename='dist/css/output.css')}}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/task.css') }}">
        <link rel="stylesheet" href="{{url_for('static',filename='css/digitalclock.css')}}" />



    </head>


    <body class="bg-gray-900">

        <!-- Navbar -->
        <div class="bg-gray-800 text-white py-3">
            <div class="container mx-auto flex justify-between items-center px-4">
                <h1 class="text-2xl font-semibold">Welcome, {{ user.first_name }}!</h1>
                <ul class="flex gap-8 text-base">
                    <li>
                        <a href="/user/profile" class="button profile-button flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M16 9a4 4 0 1 1-8 0a4 4 0 0 1 8 0Zm-2 0a2 2 0 1 1-4 0a2 2 0 0 1 4 0Z" />
                                <path
                                    d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1ZM3 12c0 2.09.713 4.014 1.908 5.542A8.986 8.986 0 0 1 12.065 14a8.984 8.984 0 0 1 7.092 3.458A9 9 0 1 0 3 12Zm9 9a8.963 8.963 0 0 1-5.672-2.012A6.992 6.992 0 0 1 12.065 16a6.991 6.991 0 0 1 5.689 2.92A8.964 8.964 0 0 1 12 21Z" />
                            </svg>Profile
                        </a>
                    </li>
                    <li>
                        <a href="/logout" class="button logout-button flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path fill="currentColor"
                                    d="M512 1024q-139 0-257-68.5T68.5 769T0 512q0-97 34.5-185T132 170q3-3 11.5-12t14-14.5t15-10.5t19.5-5q26 0 45 19t19 45q0 16-3.5 28t-7.5 16l-3 5q-54 53-84 123t-30 148q0 104 51.5 192.5t140 140T512 896t192.5-51.5t140-140T896 512q0-78-30-148.5T783 240q-15-15-15-48q0-26 19-45t45-19q7 0 13.5 2t10.5 4t10.5 8t8.5 8.5t9 10.5t8 9q63 69 97.5 157t34.5 185q0 104-40.5 199t-109 163.5t-163.5 109t-199 40.5zm0-512q-27 0-45.5-18.5T448 448V64q0-27 19-45.5T512.5 0t45 18.5T576 64v384q0 27-18.5 45.5T512 512z" />
                            </svg>Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>


        {# Top content #}
        <div id="top" class="h-full">


            {# Clock #}

            <div id="clock" class="hero">


                {# Welcome messages #}
                <div class="container mx-auto flex flex-col justify-center items-center px-4"></div>
                <h1 class="text-5xl text-stone-100 font-bold p-20">
                    Let's Get to Work 
                    <span class="text-6xl font-extrabold text-amber-500">{{ user.first_name }}</span> !
                </h1>


                        <div class="flex justify-center items-center">
                          
                        <h2 class="text-3xl text-slate-200 font-bold p-20">You have <span class="text-4xl text-rose-700">{{
                            user.tasks|selectattr('status', 'equalto', 'Pending')|list|length }}</span> tasks <span class="text-rose-600 font-extrabold italic">left </span>to complete.</h2>
                        
                            <h2 class="text-3xl text-slate-200 font-bold p-20">You have <span class="text-4xl text-amber-500">{{
                                user.tasks|selectattr('status', 'equalto', 'InProgress')|list|length }}</span> tasks <span class="text-green-500 font-light italic">in progress</span>.</h2>
                        
</div>




                {# Toggle Seconds #}
                <div class="flex p-10 flex-row justify-between toggle">
                    <label for="secondToggle" class="flex items-center cursor-pointer">
                        <div class="relative">
                            <input type="checkbox" name="secondToggle" id="secondToggle" class="checkbox hidden"
                                onchange="toggleSeconds(this)">
                            <div class="block border-[1px] dark:border-white border-gray-900 w-14 h-8 rounded-full">
                            </div>
                            <div
                                class="dot bg-slate-300 absolute left-1 top-1 dark:bg-white  w-6 h-6 rounded-full transition">
                            </div>
                        </div>
                        <div class="ml-3 dark:text-white text-stone-100 font-medium">
                            Toggle Seconds
                        </div>
                    </label>

                </div>


                <div class="box">
                    <style></style>
                    <div class="clock">
                        <span id="hrs">00</span>
                        <span>:</span>
                        <span id="min">00</span>
                        <span id="colon">:</span>

                        <span id="sec">00</span>
                    </div>
                </div>




                  <!--Music Player -->
            <div id="music-player" class="text-stone-100 min-w-min bg-blue-700/80 rounded flex justify-center mx-auto">
                <div class="player-controls">
                    <button class="button flex items-center p-2" id="play-pause-btn">
                        Start Music
                    </button>
                </div>
                <audio type="hidden" id="audio-player" src="https://play.streamafrica.net/lofiradio" controls
                    style="display: none;"></audio>
            </div>



            </div>

        </div>

        {# Main content #}
        <div id="main" class="container mx-auto h-full">
            <!-- Tasks Section -->
            <section class="py-14 md:py-24 bg-slate-900 dark:bg-slate-900 text-zinc-900 dark:text-white">



                {# Add Task #}
                <div class="container px-4 mx-auto">
                    <div class="flex justify-center mb-6 md:mb-12">
                        <div class="max-w-lg text-center">
                            <h2 class="text-3xl text-blue-500 leading-none font-bold md:text-[45px] mb-4">Tasks</h2>
                            <p class="mb-2 text-stone-100" >Manage your tasks efficiently.</p>
                            <a href="/add"
                                class="m-1 button-inline  bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded mr-2">
                                <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 5v14m7-7H5"></path>
                                </svg>
                                <span class="ml-1 text-center">Add Task</span>
                            </a>
                        </div>
                    </div>
                </div>




                <!-- Task Cards -->
        
                    <div class="container px-4 mx-auto">
                        <div class="flex justify-center mb-6 md:mb-12">
                            <div class="max-w-lg text-center">
                                <h2 class="text-3xl text-green-500 leading-none font-bold md:text-[45px] my-4">Pending
                                    Tasks</h2>
                                <p class="text-stone-100">Tasks that need to be completed</p>
                                </div>
                            </div>
                   <div  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center pt-6">
                    <!-- Dynamic Task Cards -->
                    {% if user.tasks %}
                    {% for task in user.tasks %}
                    {% if task.status != 'Completed' and task.status != 'InProgress' %}
                    <div class="text-md task {% if task.priority == 'High' %} high-priority
                           {% elif task.priority == 'Medium' %} medium-priority
                           {% else %} low-priority {% endif %}">
                        <div
                            class="bg-slate-800/80 text-stone-50 dark:bg-slate-800 shadow-xl rounded-xl hover:-translate-y-1 duration-500 p-6 lg:p-8">
                            <h4 class="text-2xl font-medium mb-1">{{ task.title }}</h4>
                            <p>Priority:
                        <form method="POST" action="/update_priority/{{ task.task_id }}"
                                id="priority-form-{{ task.task_id }}">
                                <div class="flex justify-center gap-1 my-1">
                                    <input class="my-2" type="radio" id="high-priority-{{ task.task_id }}" name="priority"
                                        value="High" {% if task.priority=='High' %} checked {% endif %}>
                                    <label for="high-priority-{{ task.task_id }}">High</label>
                                    <input class="my-2" type="radio" id="medium-priority-{{ task.task_id }}" name="priority"
                                        value="Medium" {% if task.priority=='Medium' %} checked {% endif %}>
                                    <label for="medium-priority-{{ task.task_id }}">Medium</label>
                                    <input class="my-2" type="radio" id="low-priority-{{ task.task_id }}" name="priority" value="Low"
                                        {% if task.priority=='Low' %} checked {% endif %}>
                                    <label for="low-priority-{{ task.task_id }}">Low</label>
                                </div>
                            <button type="submit"
                                class="button-inline my-3 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">Update
                                Priority</button>
                            </form>



                            <p class="my-5 text-stone-300">{{ task.description }}</p>
                 
                            <p>Status: {{ task.status }}</p>
                            <p class="mt-4">Deadline: {{ task.deadline }}</p>
                            <p class="mt-4">Created At: {{ task.created_at }}</p>

                            <div class="mt-6">
                                <a href="/edit/{{ task.task_id }}"
                                    class="button-inline  bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded mr-2">
                                    <svg class="svg-icon-text" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                                        <path fill="none" stroke="currentColor" stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="m6.926 13.202l-3 .26l.26-3l6.24-6.2a1 1 0 0 1 1.43 0l1.27 1.28a1.001 1.001 0 0 1 0 1.42zM.842 3.972c-.351-.061-.351-.565 0-.626A3.176 3.176 0 0 0 3.4.896l.021-.097c.076-.346.57-.349.65-.002l.025.112A3.193 3.193 0 0 0 6.66 3.345c.353.06.353.567 0 .629a3.193 3.193 0 0 0-2.565 2.435l-.026.113c-.079.346-.573.344-.649-.003l-.02-.097a3.176 3.176 0 0 0-2.56-2.45Z" />
                                    </svg>Edit
                                </a>
                                <a href="/delete/{{ task.task_id }}"
                                    class="button-inline  bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded">
                                    <svg class="svg-icon-text" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">
                                        <path fill="currentColor"
                                            d="M11.5-.031c-1.958 0-3.531 1.627-3.531 3.594V4H4c-.551 0-1 .449-1 1v1H2v2h2v15c0 1.645 1.355 3 3 3h12c1.645 0 3-1.355 3-3V8h2V6h-1V5c0-.551-.449-1-1-1h-3.969v-.438c0-1.966-1.573-3.593-3.531-3.593h-3zm0 2.062h3c.804 0 1.469.656 1.469 1.531V4H10.03v-.438c0-.875.665-1.53 1.469-1.53zM6 8h5.125c.124.013.247.031.375.031h3c.128 0 .25-.018.375-.031H20v15c0 .563-.437 1-1 1H7c-.563 0-1-.437-1-1V8zm2 2v12h2V10H8zm4 0v12h2V10h-2zm4 0v12h2V10h-2z" />
                                    </svg>Delete
                                </a>
                            </div>


                            <div class="mt-6">
                                <a href="/mark_in_progress/{{ task.task_id }}"
                                    class="inline-block bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded">
                                    <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                                        <path fill="currentColor" fill-rule="evenodd"
                                            d="M8 2a.75.75 0 0 1 .75.75v8.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.22 3.22V2.75A.75.75 0 0 1 8 2"
                                            clip-rule="evenodd" />
                                    </svg></a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% else %}
                    <p>No tasks found.</p>
                    {% endif %}
                </div>
        </div>
        </section>

        
        <!-- Working On Section -->
        <div id="working-on" class="container px-4 mx-auto">
            <div class="flex justify-center mb-6 md:mb-12">
                <div class="max-w-lg text-center">
                    <h2 class="text-3xl text-yellow-500 leading-none font-bold md:text-[45px] my-4">Working On</h2>
                    <p class="text-stone-100">Tasks currently in progress</p>
                </div>
            </div>
            <div class="flex justify-between mb-6">




                <!-- Dynamic Task Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center pt-6">

                    {% for task in user.tasks %}
                    {% if task.status == 'InProgress' %}
                    <div class="task {% if task.priority == 'High' %} high-priority
                                       {% elif task.priority == 'Medium' %} medium-priority
                                       {% else %} low-priority {% endif %}">
                        <div id="card-content" class="bg-slate-900/80 dark:bg-slate-800 shadow-xl rounded-xl hover:-translate-y-1 duration-500 p-6 lg:p-8">
                            {# Card Content #}
                            <h4 class="text-xl font-medium mb-1">{{ task.title }}</h4>
                            <p class="">Priority:
                            <form method="POST" action="/update_priority/{{ task.task_id }}"
                                id="priority-form-{{ task.task_id }}">
                                <div class="flex justify-center">
                                    <input type="radio" id="high-priority-{{ task.task_id }}" name="priority"
                                        value="High" {% if task.priority=='High' %} checked {% endif %}>
                                    <label for="high-priority-{{ task.task_id }}">High</label>
                                    <input type="radio" id="medium-priority-{{ task.task_id }}" name="priority"
                                        value="Medium" {% if task.priority=='Medium' %} checked {% endif %}>
                                    <label for="medium-priority-{{ task.task_id }}">Medium</label>
                                    <input type="radio" id="low-priority-{{ task.task_id }}" name="priority" value="Low"
                                        {% if task.priority=='Low' %} checked {% endif %}>
                                    <label for="low-priority-{{ task.task_id }}">Low</label>
                                </div>
                                <button type="submit"
                                    class="button-inline  bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">Update
                                    Priority</button>
                            </form>
                            </p>
                            <p class="opacity-75">{{ task.description }}</p>
                            <p class="mt-4">Deadline: {{ task.deadline }}</p>
                            <p>Status: {{ task.status }}</p>
                            <p>Created At: {{ task.created_at }}</p>

                            <div class="mt-6">
                                <a href="/edit/task/{{ task.task_id }}"
                                    class="button-inline  bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded mr-2">
                                    <svg class="svg-icon-text" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                                        <path fill="none" stroke="currentColor" stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="m6.926 13.202l-3 .26l.26-3l6.24-6.2a1 1 0 0 1 1.43 0l1.27 1.28a1.001 1.001 0 0 1 0 1.42zM.842 3.972c-.351-.061-.351-.565 0-.626A3.176 3.176 0 0 0 3.4.896l.021-.097c.076-.346.57-.349.65-.002l.025.112A3.193 3.193 0 0 0 6.66 3.345c.353.06.353.567 0 .629a3.193 3.193 0 0 0-2.565 2.435l-.026.113c-.079.346-.573.344-.649-.003l-.02-.097a3.176 3.176 0 0 0-2.56-2.45Z" />
                                    </svg>Edit
                                </a>
                                <a href="/delete/{{ task.task_id }}"
                                    class="button-inline  bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded">
                                    <svg class="svg-icon-text" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">
                                        <path fill="currentColor"
                                            d="M11.5-.031c-1.958 0-3.531 1.627-3.531 3.594V4H4c-.551 0-1 .449-1 1v1H2v2h2v15c0 1.645 1.355 3 3 3h12c1.645 0 3-1.355 3-3V8h2V6h-1V5c0-.551-.449-1-1-1h-3.969v-.438c0-1.966-1.573-3.593-3.531-3.593h-3zm0 2.062h3c.804 0 1.469.656 1.469 1.531V4H10.03v-.438c0-.875.665-1.53 1.469-1.53zM6 8h5.125c.124.013.247.031.375.031h3c.128 0 .25-.018.375-.031H20v15c0 .563-.437 1-1 1H7c-.563 0-1-.437-1-1V8zm2 2v12h2V10H8zm4 0v12h2V10h-2zm4 0v12h2V10h-2z" />
                                    </svg>Delete
                                </a>
                            </div>

                            <div class="mt-6">

                                {# pending  #}
                                <a href="/mark_pending/{{ task.task_id }}"
                                    class="inline-block bg-amber-500 hover:bg-amber-400 text-white font-bold py-2 px-4 rounded">
                                    <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                                        <path fill="currentColor" fill-rule="evenodd"
                                            d="M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14"
                                            clip-rule="evenodd" />
                                    </svg>
                                </a>

                                {# completed  #}
                                <a href="/mark_completed/{{ task.task_id }}"
                                    class="inline-block bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded">
                                    <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                                        <path fill="currentColor" fill-rule="evenodd"
                                            d="M8 2a.75.75 0 0 1 .75.75v8.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.22 3.22V2.75A.75.75 0 0 1 8 2"
                                            clip-rule="evenodd" />
                                    </svg>
                                </a>
                            </div>

                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}

                </div>

            </div>
        </div>



 <!-- Completed -->
<div id="completed" class="container px-4 mx-auto mb-10">
    <div class="flex justify-center mb-6 md:mb-12">
        <div class="max-w-lg text-center">
            <h2 class="text-3xl text-emerald-600 leading-none font-bold md:text-[45px] my-4">Completed</h2>
            <h2 class="text-3xl text-slate-200 font-bold p-20">You completed <span class="text-4xl text-rose-700">{{
                user.tasks|selectattr('status', 'equalto', 'Completed')|list|length }}</span> tasks <span class="text-rose-600 font-extrabold italic"> </span>!</h2>
        </div>
    </div>
    <div class="flex justify-center mb-6"> <!-- Center the Clear All button -->
        <a href="/clear_tasks/{{ user.user_id }}"
            class="button-inline  bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded">
            Clear All
        </a>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 text-center pt-6">
        {% for task in user.tasks %}
            {% if task.status == 'Completed' %}
                <div class="w-full bg-gray-700 text-stone-400/50">
                    <div class="text-center p-5">
                        <p>Title: {{ task.title }}</p>
                        <p>Description: {{ task.description }}</p>
                        <p>Status: {{ task.status }}</p>
                        {# <p>Created At: {{ task.created_at }}</p> #}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

    {# Scripts #}
    <script src="{{ url_for('static', filename='js/audio.js') }}"></script>
        <script src="{{ url_for('static', filename='js/dateUil.js') }}"></script>
    <script src="{{ url_for('static', filename='js/digitalclock.js') }}"></script>
    </body>




</html>